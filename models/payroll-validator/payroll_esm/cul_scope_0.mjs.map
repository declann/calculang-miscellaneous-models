{"version":3,"sources":["payroll.cul.js"],"names":["usc_table","band_id","band_co","rate","usc_band_id","usc_band_id_in","usc_band_end","pay_period_duration_in","pay_period_in","factor_for_credits_and_bands","usc_band_start","usc_rate","usc_taxable_salary","pay_period_gross_salary_in","op_gross_salary_in","fut_gross_salary_in","gross_salary","usc_by_band_id","usc_taxable_by_band_id","Math","min","max","usc","reduce","a","v","pay_period","pay_period_duration","op_gross_salary","pay_period_gross_salary","fut_gross_salary","usc_payable"],"mappings":"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","sourcesContent":["// WIP\n\n// USC code adapted from simple-incometax.cul.js\n\n// USC, should be mostly abstracted to a table loader\n// issues: #11 #76\nexport const usc_table = ({}) => [\n{ band_id: 1, band_co: 12012, rate: 0.005 },\n{ band_id: 2, band_co: 21295, rate: 0.02 },\n{\n  band_id: 3,\n  band_co: 70144,\n  rate: 0.045 },\n\n{ band_id: 4, band_co: 999999999, rate: 0.08 }];\n\n\nexport const usc_band_id = ({ usc_band_id_in }) => usc_band_id_in;\n\nexport const usc_band_end = ({ usc_band_id_in, pay_period_duration_in, pay_period_in }) => {\n  return (\n    usc_table({})[usc_band_id({ usc_band_id_in }) - 1].band_co * factor_for_credits_and_bands({ pay_period_duration_in, pay_period_in }));\n\n};\n\nexport const usc_band_start = ({ usc_band_id_in, pay_period_duration_in, pay_period_in }) => {\n  if (usc_band_id({ usc_band_id_in }) == 1) return 0;\n  return (\n    usc_table({})[usc_band_id({ usc_band_id_in }) - 2].band_co * factor_for_credits_and_bands({ pay_period_duration_in, pay_period_in }));\n\n};\n\nexport const usc_rate = ({ usc_band_id_in }) => usc_table({})[usc_band_id({ usc_band_id_in }) - 1].rate;\n\nexport const usc_taxable_salary = ({ pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) => gross_salary({ pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }); // pay usc on pension contribution\n\nexport const usc_by_band_id = ({ usc_band_id_in, pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) => usc_rate({ usc_band_id_in }) * usc_taxable_by_band_id({ usc_band_id_in, pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in });\n\nexport const usc_taxable_by_band_id = ({ usc_band_id_in, pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) =>\nMath.min(\nusc_band_end({ usc_band_id_in, pay_period_duration_in, pay_period_in }) - usc_band_start({ usc_band_id_in, pay_period_duration_in, pay_period_in }),\nMath.max(usc_taxable_salary({ pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) - usc_band_start({ usc_band_id_in, pay_period_duration_in, pay_period_in }), 0));\n\n\nexport const usc = ({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) =>\nusc_table({}).reduce(\n(a, v) => a + usc_by_band_id({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in, usc_band_id_in: v.band_id }),\n0) *\n1; //(gross_salary() > 13000 ? 1 : 0);\n\n// end USC\n\nexport const pay_period = ({ pay_period_in }) => pay_period_in;\nexport const pay_period_duration = ({ pay_period_duration_in }) => pay_period_duration_in; // 'M' or 'W'\n\n// op = opening = pre current pay period, fut = after current pay period to end of year\nexport const op_gross_salary = ({ op_gross_salary_in }) => op_gross_salary_in;\nexport const pay_period_gross_salary = ({ pay_period_gross_salary_in }) => pay_period_gross_salary_in;\nexport const fut_gross_salary = ({ fut_gross_salary_in }) => fut_gross_salary_in;\nexport const gross_salary = ({ pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) =>\npay_period_gross_salary({ pay_period_gross_salary_in }) +\nop_gross_salary({ op_gross_salary_in }) +\nfut_gross_salary({ fut_gross_salary_in }) * (factor_for_credits_and_bands == 1 ? 1 : 0); // but fut gross salary into last pay period\n\n/*export const op_usc = () => usc({ pay_period_in: pay_period() - 1 });\r\nexport const op_usc_taxable_by_band_id = () => usc_taxable_by_band_id({ pay_period_in: pay_period() - 1 });*/ // leave this to application?\n//export const pay_period_usc = () => usc() - op_usc();\n\nexport const usc_payable = ({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) =>\nusc({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in }) - usc({ pay_period_duration_in, pay_period_gross_salary_in, op_gross_salary_in, fut_gross_salary_in, pay_period_in: pay_period({ pay_period_in }) - 1 });\n\nexport const factor_for_credits_and_bands = ({ pay_period_duration_in, pay_period_in }) => {\n  if (pay_period_duration({ pay_period_duration_in }) == 'W') return pay_period({ pay_period_in }) / 52;\n  if (pay_period_duration({ pay_period_duration_in }) == 'M') return pay_period({ pay_period_in }) / 12;\n  return 999;\n};"]}