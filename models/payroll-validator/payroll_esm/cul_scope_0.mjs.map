{"version":3,"sources":["payroll.cul.js"],"names":["usc_table","band_id","band_co","rate","usc_band_id","usc_band_id_in","usc_band_end","pay_period_duration_in","pay_period_in","factor_for_credits_and_bands","usc_band_start","usc_rate","usc_taxable_salary","pay_period_gross_salary_in","op_gross_salary_in","gross_salary","usc_by_band_id","usc_taxable_by_band_id","Math","min","max","usc","reduce","a","v","pay_period","pay_period_duration","op_gross_salary","pay_period_gross_salary","op_usc","pay_period_usc"],"mappings":"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","sourcesContent":["// USC code adapted from simple-incometax.cul.js\n\n// USC, should be mostly abstracted to a table loader\n// issues: #11 #76\nexport const usc_table = ({}) => [\n{ band_id: 1, band_co: 12012, rate: 0.005 },\n{ band_id: 2, band_co: 21295, rate: 0.02 },\n{\n  band_id: 3,\n  band_co: 70144,\n  rate: 0.045 },\n\n{ band_id: 4, band_co: 999999999, rate: 0.08 }];\n\n\nexport const usc_band_id = ({ usc_band_id_in }) => usc_band_id_in;\n\nexport const usc_band_end = ({ usc_band_id_in, pay_period_duration_in, pay_period_in }) => {\n  return (\n    usc_table({})[usc_band_id({ usc_band_id_in }) - 1].band_co * factor_for_credits_and_bands({ pay_period_duration_in, pay_period_in }));\n\n};\n\nexport const usc_band_start = ({ usc_band_id_in, pay_period_duration_in, pay_period_in }) => {\n  if (usc_band_id({ usc_band_id_in }) == 1) return 0;\n  return (\n    usc_table({})[usc_band_id({ usc_band_id_in }) - 2].band_co * factor_for_credits_and_bands({ pay_period_duration_in, pay_period_in }));\n\n};\n\nexport const usc_rate = ({ usc_band_id_in }) => usc_table({})[usc_band_id({ usc_band_id_in }) - 1].rate;\n\nexport const usc_taxable_salary = ({ pay_period_gross_salary_in, op_gross_salary_in }) => gross_salary({ pay_period_gross_salary_in, op_gross_salary_in }); // pay usc on pension contribution\n\nexport const usc_by_band_id = ({ usc_band_id_in, pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in }) => usc_rate({ usc_band_id_in }) * usc_taxable_by_band_id({ usc_band_id_in, pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in });\n\nexport const usc_taxable_by_band_id = ({ usc_band_id_in, pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in }) =>\nMath.min(\nusc_band_end({ usc_band_id_in, pay_period_duration_in, pay_period_in }) - usc_band_start({ usc_band_id_in, pay_period_duration_in, pay_period_in }),\nMath.max(usc_taxable_salary({ pay_period_gross_salary_in, op_gross_salary_in }) - usc_band_start({ usc_band_id_in, pay_period_duration_in, pay_period_in }), 0));\n\n\nexport const usc = ({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in }) =>\nusc_table({}).reduce(\n(a, v) => a + usc_by_band_id({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in, usc_band_id_in: v.band_id }),\n0) *\n1; //(gross_salary() > 13000 ? 1 : 0);\n\n\n// end USC\n\nexport const pay_period = ({ pay_period_in }) => pay_period_in;\nexport const pay_period_duration = ({ pay_period_duration_in }) => pay_period_duration_in; // 'M' or 'W'\n\n// op = opening = pre current pay period, fut = after current pay period to end of year\nexport const op_gross_salary = ({ op_gross_salary_in }) => op_gross_salary_in;\nexport const pay_period_gross_salary = ({ pay_period_gross_salary_in }) => pay_period_gross_salary_in;\nexport const gross_salary = ({ pay_period_gross_salary_in, op_gross_salary_in }) => pay_period_gross_salary({ pay_period_gross_salary_in }) + op_gross_salary({ op_gross_salary_in });\n\nexport const op_usc = ({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in }) => usc({ pay_period_duration_in, pay_period_gross_salary_in, op_gross_salary_in, pay_period_in: pay_period({ pay_period_in }) - 1 });\nexport const pay_period_usc = ({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in }) => usc({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in }) - op_usc({ pay_period_duration_in, pay_period_in, pay_period_gross_salary_in, op_gross_salary_in });\n\nexport const factor_for_credits_and_bands = ({ pay_period_duration_in, pay_period_in }) => {\n  if (pay_period_duration({ pay_period_duration_in }) == 'W') return pay_period({ pay_period_in }) / 52;\n  if (pay_period_duration({ pay_period_duration_in }) == 'M') return pay_period({ pay_period_in }) / 12;\n  return 999;\n};"]}