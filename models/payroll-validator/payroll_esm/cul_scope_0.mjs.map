{"version":3,"sources":["payroll.cul.js"],"names":["usc_table","band_id","band_co","rate","usc_band_id","usc_band_id_in","usc_band_end","pay_period_duration_in","time_in","factor_for_credits_and_bands","usc_band_start","usc_rate","usc_taxable_salary","pay_period_in","op_gross_salary_in","pay_period_gross_salary_in","fut_gross_salary_in","gross_salary","usc_by_band_id","usc_taxable_by_band_id","Math","min","max","usc","reduce","a","v","pay_period","pay_period_duration","op_gross_salary","pay_period_gross_salary","fut_gross_salary","time","usc_payable"],"mappings":"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","sourcesContent":["// WIP\n\n// USC code adapted from simple-incometax.cul.js\n\n// USC, should be mostly abstracted to a table loader\n// issues: #11 #76\nexport const usc_table = ({}) => [\n{ band_id: 1, band_co: 12012, rate: 0.005 },\n{ band_id: 2, band_co: 21295, rate: 0.02 },\n{\n  band_id: 3,\n  band_co: 70144,\n  rate: 0.045 },\n\n{ band_id: 4, band_co: 999999999, rate: 0.08 }];\n\n\nexport const usc_band_id = ({ usc_band_id_in }) => usc_band_id_in;\n\nexport const usc_band_end = ({ usc_band_id_in, pay_period_duration_in, time_in }) => {\n  return (\n    usc_table({})[usc_band_id({ usc_band_id_in }) - 1].band_co * factor_for_credits_and_bands({ pay_period_duration_in, time_in }));\n\n};\n\nexport const usc_band_start = ({ usc_band_id_in, pay_period_duration_in, time_in }) => {\n  if (usc_band_id({ usc_band_id_in }) == 1) return 0;\n  return (\n    usc_table({})[usc_band_id({ usc_band_id_in }) - 2].band_co * factor_for_credits_and_bands({ pay_period_duration_in, time_in }));\n\n};\n\nexport const usc_rate = ({ usc_band_id_in }) => usc_table({})[usc_band_id({ usc_band_id_in }) - 1].rate;\n\nexport const usc_taxable_salary = ({ time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, pay_period_duration_in, fut_gross_salary_in }) => gross_salary({ time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, pay_period_duration_in, fut_gross_salary_in }); // pay usc on pension contribution\n\nexport const usc_by_band_id = ({ usc_band_id_in, pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in }) => usc_rate({ usc_band_id_in }) * usc_taxable_by_band_id({ usc_band_id_in, pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in });\n\nexport const usc_taxable_by_band_id = ({ usc_band_id_in, pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in }) =>\nMath.min(\nusc_band_end({ usc_band_id_in, pay_period_duration_in, time_in }) - usc_band_start({ usc_band_id_in, pay_period_duration_in, time_in }),\nMath.max(usc_taxable_salary({ time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, pay_period_duration_in, fut_gross_salary_in }) - usc_band_start({ usc_band_id_in, pay_period_duration_in, time_in }), 0));\n\n\nexport const usc = ({ pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in }) =>\nusc_table({}).reduce(\n(a, v) => a + usc_by_band_id({ pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in, usc_band_id_in: v.band_id }),\n0) *\n1; //(gross_salary() > 13000 ? 1 : 0);\n\n// end USC\n\nexport const pay_period = ({ pay_period_in }) => pay_period_in;\nexport const pay_period_duration = ({ pay_period_duration_in }) => pay_period_duration_in; // 'M' or 'W'\n\n// op = opening = pre current pay period, fut = after current pay period to end of year\nexport const op_gross_salary = ({ op_gross_salary_in }) => op_gross_salary_in;\nexport const pay_period_gross_salary = ({ pay_period_gross_salary_in }) => pay_period_gross_salary_in;\nexport const fut_gross_salary = ({ fut_gross_salary_in }) => fut_gross_salary_in;\nexport const gross_salary = ({ time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, pay_period_duration_in, fut_gross_salary_in }) => {\n  if (time({ time_in }) == pay_period({ pay_period_in }) - 1) return op_gross_salary({ op_gross_salary_in });else\n  if (time({ time_in }) == pay_period({ pay_period_in }))\n  return op_gross_salary({ op_gross_salary_in }) + pay_period_gross_salary({ pay_period_gross_salary_in });else\n  if (factor_for_credits_and_bands({ pay_period_duration_in, time_in }) == 1)\n  return op_gross_salary({ op_gross_salary_in }) + pay_period_gross_salary({ pay_period_gross_salary_in }) + fut_gross_salary({ fut_gross_salary_in });\n};\n/*\r\n  pay_period_gross_salary() +\r\n  op_gross_salary() + // following expression means I need to define fut_gross_salary_in even if it isn't used for op/current pay period\r\n  fut_gross_salary() * (factor_for_credits_and_bands == 1 ? 1 : 0);*/ // but fut gross salary into last pay period\n\n/*export const op_usc = () => usc({ pay_period_in: pay_period() - 1 });\r\nexport const op_usc_taxable_by_band_id = () => usc_taxable_by_band_id({ pay_period_in: pay_period() - 1 });*/ // leave this to application?\n//export const pay_period_usc = () => usc() - op_usc();\n\nexport const usc_payable = ({ pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in }) => usc({ pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in }) - usc({ pay_period_duration_in, time_in, pay_period_in, op_gross_salary_in, pay_period_gross_salary_in, fut_gross_salary_in, time: time({ time_in }) - 1 });\n\nexport const time = ({ time_in }) => time_in;\n\nexport const factor_for_credits_and_bands = ({ pay_period_duration_in, time_in }) => {\n  if (pay_period_duration({ pay_period_duration_in }) == 'W') return time({ time_in }) / 52;\n  if (pay_period_duration({ pay_period_duration_in }) == 'M') return time({ time_in }) / 12;\n  return 999;\n};"]}