{"version":3,"sources":["webpack:///../../../../calculang-miscellaneous-models/webpack/universalModuleDefinition","webpack:///../../../../calculang-miscellaneous-models/webpack/bootstrap","webpack:///../../../../calculang-miscellaneous-models/payroll.cul.js"],"names":["usc_table","band_id","band_co","rate","usc_band_id","usc_band_id_in","usc_band_end","factor_for_credits_and_bands","usc_band_start","usc_rate","usc_taxable_salary","gross_salary","usc_by_band_id","usc_taxable_by_band_id","Math","min","max","usc","reduce","a","v","pay_period","pay_period_in","pay_period_duration","pay_period_duration_in","op_gross_salary","op_gross_salary_in","pay_period_gross_salary","pay_period_gross_salary_in","fut_gross_salary","fut_gross_salary_in","time","usc_payable","time_in","paye_table","paye_band_id","paye_band_id_in","paye_band_end","length","paye_band_start","paye_rate","paye_taxable_salary","pension_contribution","op_pension_contribution","op_pension_contribution_in","pay_period_pension_contribution","pay_period_pension_contribution_in","fut_pension_contribution","fut_pension_contribution_in","paye_by_band_id","paye_taxable_by_band_id","paye_over_bands","tax_credits_pa","tax_credits_pa_in","tax_credits","paye","paye_payable"],"mappings":"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","file":"payroll.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","// WIP\r\n\r\n// USC code adapted from simple-incometax.cul.js\r\n\r\n// USC, should be mostly abstracted to a table loader\r\n// issues: #11 #76\r\nexport const usc_table = () => [\r\n  { band_id: 1, band_co: 12012, rate: 0.005 },\r\n  { band_id: 2, band_co: 21295, rate: 0.02 },\r\n  {\r\n    band_id: 3,\r\n    band_co: 70144,\r\n    rate: 0.045,\r\n  },\r\n  { band_id: 4, band_co: 999999999, rate: 0.08 },\r\n];\r\n\r\nexport const usc_band_id = () => usc_band_id_in;\r\n\r\nexport const usc_band_end = () => {\r\n  return (\r\n    usc_table()[usc_band_id() - 1].band_co * factor_for_credits_and_bands()\r\n  );\r\n};\r\n\r\nexport const usc_band_start = () => {\r\n  if (usc_band_id() == 1) return 0;\r\n  return (\r\n    usc_table()[usc_band_id() - 2].band_co * factor_for_credits_and_bands()\r\n  );\r\n};\r\n\r\nexport const usc_rate = () => usc_table()[usc_band_id() - 1].rate;\r\n\r\nexport const usc_taxable_salary = () => gross_salary(); // pay usc on pension contribution\r\n\r\nexport const usc_by_band_id = () => usc_rate() * usc_taxable_by_band_id();\r\n\r\nexport const usc_taxable_by_band_id = () =>\r\n  Math.min(\r\n    usc_band_end() - usc_band_start(),\r\n    Math.max(usc_taxable_salary() - usc_band_start(), 0)\r\n  );\r\n\r\nexport const usc = () =>\r\n  usc_table().reduce(\r\n    (a, v) => a + usc_by_band_id({ usc_band_id_in: v.band_id }),\r\n    0\r\n  ) * 1; //(gross_salary() > 13000 ? 1 : 0);\r\n\r\n// end USC\r\n\r\nexport const pay_period = () => pay_period_in;\r\nexport const pay_period_duration = () => pay_period_duration_in; // 'M' or 'W'\r\n\r\n// op = opening = pre current pay period, fut = after current pay period to end of year\r\nexport const op_gross_salary = () => op_gross_salary_in;\r\nexport const pay_period_gross_salary = () => pay_period_gross_salary_in;\r\nexport const fut_gross_salary = () => fut_gross_salary_in;\r\nexport const gross_salary = () => {\r\n  if (time() == pay_period() - 1) return op_gross_salary();\r\n  else if (time() == pay_period())\r\n    return op_gross_salary() + pay_period_gross_salary();\r\n  else if (factor_for_credits_and_bands() == 1)\r\n    return op_gross_salary() + pay_period_gross_salary() + fut_gross_salary();\r\n};\r\n/*\r\n  pay_period_gross_salary() +\r\n  op_gross_salary() + // following expression means I need to define fut_gross_salary_in even if it isn't used for op/current pay period\r\n  fut_gross_salary() * (factor_for_credits_and_bands == 1 ? 1 : 0);*/ // but fut gross salary into last pay period\r\n\r\n/*export const op_usc = () => usc({ pay_period_in: pay_period() - 1 });\r\nexport const op_usc_taxable_by_band_id = () => usc_taxable_by_band_id({ pay_period_in: pay_period() - 1 });*/ // leave this to application?\r\n//export const pay_period_usc = () => usc() - op_usc();\r\n\r\nexport const usc_payable = () => usc() - usc({ time_in: time() - 1 });\r\n\r\n// PAYE\r\n\r\nexport const paye_table = () => [\r\n  { band_id: 1, band_co: 36800, rate: 0.2 },\r\n  { band_id: 2, band_co: 100000, rate: 0.4 },\r\n  {\r\n    band_id: 3,\r\n    band_co: 0,\r\n    rate: 0.4,\r\n  },\r\n];\r\n\r\nexport const paye_band_id = () => paye_band_id_in;\r\n\r\nexport const paye_band_end = () => {\r\n  if (paye_band_id() == paye_table().length) return 999999999;\r\n  return (\r\n    paye_table()[paye_band_id() - 1].band_co * factor_for_credits_and_bands()\r\n  );\r\n};\r\n\r\nexport const paye_band_start = () => {\r\n  if (paye_band_id() == 1) return 0;\r\n  return (\r\n    paye_table()[paye_band_id() - 2].band_co * factor_for_credits_and_bands()\r\n  );\r\n};\r\n\r\nexport const paye_rate = () => paye_table()[paye_band_id() - 1].rate;\r\n\r\nexport const paye_taxable_salary = () =>\r\n  Math.max(0, gross_salary() - pension_contribution());\r\n\r\nexport const op_pension_contribution = () => op_pension_contribution_in;\r\nexport const pay_period_pension_contribution = () =>\r\n  pay_period_pension_contribution_in;\r\nexport const fut_pension_contribution = () => fut_pension_contribution_in;\r\n\r\nexport const pension_contribution = () => {\r\n  if (time() == pay_period() - 1) return op_pension_contribution();\r\n  else if (time() == pay_period())\r\n    return op_pension_contribution() + pay_period_pension_contribution();\r\n  else if (factor_for_credits_and_bands() == 1)\r\n    return (\r\n      op_pension_contribution() +\r\n      pay_period_pension_contribution() +\r\n      fut_pension_contribution()\r\n    );\r\n};\r\n\r\nexport const paye_by_band_id = () => paye_rate() * paye_taxable_by_band_id();\r\n\r\nexport const paye_taxable_by_band_id = () =>\r\n  Math.min(\r\n    paye_band_end() - paye_band_start(),\r\n    Math.max(paye_taxable_salary() - paye_band_start(), 0)\r\n  );\r\n\r\nexport const paye_over_bands = () =>\r\n  Math.max(\r\n    0,\r\n    paye_table().reduce(\r\n      (a, v) => a + paye_by_band_id({ paye_band_id_in: v.band_id }),\r\n      0\r\n    ) //- tax_credit() // input not working here => placed outside. Issue #95\r\n  );\r\n\r\nexport const tax_credits_pa = () => tax_credits_pa_in;\r\n\r\nexport const tax_credits = () =>\r\n  tax_credits_pa() * factor_for_credits_and_bands();\r\n\r\nexport const paye = () => Math.max(paye_over_bands() - tax_credits(), 0);\r\n\r\nexport const paye_payable = () => paye() - paye({ time_in: time() - 1 });\r\n\r\nexport const time = () => time_in;\r\n\r\nexport const factor_for_credits_and_bands = () => {\r\n  if (pay_period_duration() == 'W') return time() / 52;\r\n  if (pay_period_duration() == 'M') return time() / 12;\r\n  return 999;\r\n};\r\n"],"sourceRoot":""}